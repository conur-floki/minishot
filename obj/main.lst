                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module main
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _eraseBullet
                             13 	.globl _drawBullet
                             14 	.globl _eraseEnemy
                             15 	.globl _drawEnemy
                             16 	.globl _drawPlayer
                             17 	.globl _cpct_getScreenPtr
                             18 	.globl _cpct_setPALColour
                             19 	.globl _cpct_setPalette
                             20 	.globl _cpct_waitVSYNC
                             21 	.globl _cpct_setVideoMode
                             22 	.globl _cpct_drawSprite
                             23 	.globl _cpct_drawSolidBox
                             24 	.globl _cpct_disableFirmware
                             25 ;--------------------------------------------------------
                             26 ; special function registers
                             27 ;--------------------------------------------------------
                             28 ;--------------------------------------------------------
                             29 ; ram data
                             30 ;--------------------------------------------------------
                             31 	.area _DATA
                             32 ;--------------------------------------------------------
                             33 ; ram data
                             34 ;--------------------------------------------------------
                             35 	.area _INITIALIZED
                             36 ;--------------------------------------------------------
                             37 ; absolute external ram data
                             38 ;--------------------------------------------------------
                             39 	.area _DABS (ABS)
                             40 ;--------------------------------------------------------
                             41 ; global & static initialisations
                             42 ;--------------------------------------------------------
                             43 	.area _HOME
                             44 	.area _GSINIT
                             45 	.area _GSFINAL
                             46 	.area _GSINIT
                             47 ;--------------------------------------------------------
                             48 ; Home
                             49 ;--------------------------------------------------------
                             50 	.area _HOME
                             51 	.area _HOME
                             52 ;--------------------------------------------------------
                             53 ; code
                             54 ;--------------------------------------------------------
                             55 	.area _CODE
                             56 ;src/main.c:21: void drawPlayer()
                             57 ;	---------------------------------
                             58 ; Function drawPlayer
                             59 ; ---------------------------------
   0000                      60 _drawPlayer::
                             61 ;src/main.c:23: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, PLAYER_X, PLAYER_Y);
   0000 21 25 BA      [10]   62 	ld	hl, #0xba25
   0003 E5            [11]   63 	push	hl
   0004 21 00 C0      [10]   64 	ld	hl, #0xc000
   0007 E5            [11]   65 	push	hl
   0008 CDr00r00      [17]   66 	call	_cpct_getScreenPtr
                             67 ;src/main.c:24: cpct_drawSprite(sp_player_ship, pvmem, SP_PLAYER_SHIP_W, SP_PLAYER_SHIP_H);
   000B 01r00r00      [10]   68 	ld	bc, #_sp_player_ship+0
   000E 11 06 0E      [10]   69 	ld	de, #0x0e06
   0011 D5            [11]   70 	push	de
   0012 E5            [11]   71 	push	hl
   0013 C5            [11]   72 	push	bc
   0014 CDr00r00      [17]   73 	call	_cpct_drawSprite
   0017 C9            [10]   74 	ret
                             75 ;src/main.c:27: void drawEnemy(u8 x)
                             76 ;	---------------------------------
                             77 ; Function drawEnemy
                             78 ; ---------------------------------
   0018                      79 _drawEnemy::
   0018 DD E5         [15]   80 	push	ix
   001A DD 21 00 00   [14]   81 	ld	ix,#0
   001E DD 39         [15]   82 	add	ix,sp
                             83 ;src/main.c:29: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, x, ENEMY_Y);
   0020 3E 0A         [ 7]   84 	ld	a, #0x0a
   0022 F5            [11]   85 	push	af
   0023 33            [ 6]   86 	inc	sp
   0024 DD 7E 04      [19]   87 	ld	a, 4 (ix)
   0027 F5            [11]   88 	push	af
   0028 33            [ 6]   89 	inc	sp
   0029 21 00 C0      [10]   90 	ld	hl, #0xc000
   002C E5            [11]   91 	push	hl
   002D CDr00r00      [17]   92 	call	_cpct_getScreenPtr
                             93 ;src/main.c:30: cpct_drawSprite(sp_enemy_ship, pvmem, SP_ENEMY_SHIP_W, SP_ENEMY_SHIP_H);
   0030 01r00r00      [10]   94 	ld	bc, #_sp_enemy_ship+0
   0033 11 0D 10      [10]   95 	ld	de, #0x100d
   0036 D5            [11]   96 	push	de
   0037 E5            [11]   97 	push	hl
   0038 C5            [11]   98 	push	bc
   0039 CDr00r00      [17]   99 	call	_cpct_drawSprite
   003C DD E1         [14]  100 	pop	ix
   003E C9            [10]  101 	ret
                            102 ;src/main.c:33: void eraseEnemy(u8 x)
                            103 ;	---------------------------------
                            104 ; Function eraseEnemy
                            105 ; ---------------------------------
   003F                     106 _eraseEnemy::
                            107 ;src/main.c:35: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, x, ENEMY_Y);
   003F 3E 0A         [ 7]  108 	ld	a, #0x0a
   0041 F5            [11]  109 	push	af
   0042 33            [ 6]  110 	inc	sp
   0043 21 03 00      [10]  111 	ld	hl, #3+0
   0046 39            [11]  112 	add	hl, sp
   0047 7E            [ 7]  113 	ld	a, (hl)
   0048 F5            [11]  114 	push	af
   0049 33            [ 6]  115 	inc	sp
   004A 21 00 C0      [10]  116 	ld	hl, #0xc000
   004D E5            [11]  117 	push	hl
   004E CDr00r00      [17]  118 	call	_cpct_getScreenPtr
                            119 ;src/main.c:36: cpct_drawSolidBox(pvmem, 0, SP_ENEMY_SHIP_W, SP_ENEMY_SHIP_H);
   0051 01 0D 10      [10]  120 	ld	bc, #0x100d
   0054 C5            [11]  121 	push	bc
   0055 01 00 00      [10]  122 	ld	bc, #0x0000
   0058 C5            [11]  123 	push	bc
   0059 E5            [11]  124 	push	hl
   005A CDr00r00      [17]  125 	call	_cpct_drawSolidBox
   005D C9            [10]  126 	ret
                            127 ;src/main.c:39: void drawBullet(u8 y)
                            128 ;	---------------------------------
                            129 ; Function drawBullet
                            130 ; ---------------------------------
   005E                     131 _drawBullet::
   005E DD E5         [15]  132 	push	ix
   0060 DD 21 00 00   [14]  133 	ld	ix,#0
   0064 DD 39         [15]  134 	add	ix,sp
                            135 ;src/main.c:41: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, BULLET_X, y);
   0066 DD 56 04      [19]  136 	ld	d, 4 (ix)
   0069 1E 27         [ 7]  137 	ld	e,#0x27
   006B D5            [11]  138 	push	de
   006C 21 00 C0      [10]  139 	ld	hl, #0xc000
   006F E5            [11]  140 	push	hl
   0070 CDr00r00      [17]  141 	call	_cpct_getScreenPtr
                            142 ;src/main.c:42: cpct_drawSprite(sp_bullet, pvmem, SP_BULLET_W, SP_BULLET_H);
   0073 01r00r00      [10]  143 	ld	bc, #_sp_bullet+0
   0076 11 01 08      [10]  144 	ld	de, #0x0801
   0079 D5            [11]  145 	push	de
   007A E5            [11]  146 	push	hl
   007B C5            [11]  147 	push	bc
   007C CDr00r00      [17]  148 	call	_cpct_drawSprite
   007F DD E1         [14]  149 	pop	ix
   0081 C9            [10]  150 	ret
                            151 ;src/main.c:45: void eraseBullet(u8 y)
                            152 ;	---------------------------------
                            153 ; Function eraseBullet
                            154 ; ---------------------------------
   0082                     155 _eraseBullet::
                            156 ;src/main.c:47: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, BULLET_X, y);
   0082 21 02 00      [10]  157 	ld	hl, #2+0
   0085 39            [11]  158 	add	hl, sp
   0086 56            [ 7]  159 	ld	d, (hl)
   0087 1E 27         [ 7]  160 	ld	e,#0x27
   0089 D5            [11]  161 	push	de
   008A 21 00 C0      [10]  162 	ld	hl, #0xc000
   008D E5            [11]  163 	push	hl
   008E CDr00r00      [17]  164 	call	_cpct_getScreenPtr
                            165 ;src/main.c:48: cpct_drawSolidBox(pvmem, 0, SP_BULLET_W, SP_BULLET_H);
   0091 01 01 08      [10]  166 	ld	bc, #0x0801
   0094 C5            [11]  167 	push	bc
   0095 01 00 00      [10]  168 	ld	bc, #0x0000
   0098 C5            [11]  169 	push	bc
   0099 E5            [11]  170 	push	hl
   009A CDr00r00      [17]  171 	call	_cpct_drawSolidBox
   009D C9            [10]  172 	ret
                            173 ;src/main.c:51: void main(void)
                            174 ;	---------------------------------
                            175 ; Function main
                            176 ; ---------------------------------
   009E                     177 _main::
                            178 ;src/main.c:53: u8 enemy_x = ENEMY_INIT_X;
                            179 ;src/main.c:54: u8 bullet_y = BULLET_INIT_Y;
   009E 01 B2 43      [10]  180 	ld	bc,#0x43b2
                            181 ;src/main.c:57: cpct_disableFirmware();
   00A1 C5            [11]  182 	push	bc
   00A2 CDr00r00      [17]  183 	call	_cpct_disableFirmware
   00A5 2E 00         [ 7]  184 	ld	l, #0x00
   00A7 CDr00r00      [17]  185 	call	_cpct_setVideoMode
   00AA 21 10 00      [10]  186 	ld	hl, #0x0010
   00AD E5            [11]  187 	push	hl
   00AE 21r00r00      [10]  188 	ld	hl, #_g_palette
   00B1 E5            [11]  189 	push	hl
   00B2 CDr00r00      [17]  190 	call	_cpct_setPalette
   00B5 21 10 0B      [10]  191 	ld	hl, #0x0b10
   00B8 E5            [11]  192 	push	hl
   00B9 CDr00r00      [17]  193 	call	_cpct_setPALColour
   00BC C1            [10]  194 	pop	bc
                            195 ;src/main.c:62: while (TRUE)
   00BD                     196 00116$:
                            197 ;src/main.c:64: drawPlayer();
   00BD C5            [11]  198 	push	bc
   00BE CDr00r00      [17]  199 	call	_drawPlayer
   00C1 C1            [10]  200 	pop	bc
                            201 ;src/main.c:66: if (enemy_x == 0)
   00C2 78            [ 4]  202 	ld	a, b
   00C3 B7            [ 4]  203 	or	a, a
   00C4 20 0A         [12]  204 	jr	NZ,00102$
                            205 ;src/main.c:68: eraseEnemy(enemy_x);
   00C6 C5            [11]  206 	push	bc
   00C7 C5            [11]  207 	push	bc
   00C8 33            [ 6]  208 	inc	sp
   00C9 CDr3Fr00      [17]  209 	call	_eraseEnemy
   00CC 33            [ 6]  210 	inc	sp
   00CD C1            [10]  211 	pop	bc
   00CE 18 08         [12]  212 	jr	00103$
   00D0                     213 00102$:
                            214 ;src/main.c:72: drawEnemy(enemy_x);
   00D0 C5            [11]  215 	push	bc
   00D1 C5            [11]  216 	push	bc
   00D2 33            [ 6]  217 	inc	sp
   00D3 CDr18r00      [17]  218 	call	_drawEnemy
   00D6 33            [ 6]  219 	inc	sp
   00D7 C1            [10]  220 	pop	bc
   00D8                     221 00103$:
                            222 ;src/main.c:77: if (bullet_y == 0)
   00D8 79            [ 4]  223 	ld	a, c
   00D9 B7            [ 4]  224 	or	a, a
   00DA 20 0B         [12]  225 	jr	NZ,00105$
                            226 ;src/main.c:79: eraseBullet(bullet_y);
   00DC C5            [11]  227 	push	bc
   00DD 79            [ 4]  228 	ld	a, c
   00DE F5            [11]  229 	push	af
   00DF 33            [ 6]  230 	inc	sp
   00E0 CDr82r00      [17]  231 	call	_eraseBullet
   00E3 33            [ 6]  232 	inc	sp
   00E4 C1            [10]  233 	pop	bc
   00E5 18 09         [12]  234 	jr	00108$
   00E7                     235 00105$:
                            236 ;src/main.c:83: drawBullet(bullet_y);
   00E7 C5            [11]  237 	push	bc
   00E8 79            [ 4]  238 	ld	a, c
   00E9 F5            [11]  239 	push	af
   00EA 33            [ 6]  240 	inc	sp
   00EB CDr5Er00      [17]  241 	call	_drawBullet
   00EE 33            [ 6]  242 	inc	sp
   00EF C1            [10]  243 	pop	bc
   00F0                     244 00108$:
                            245 ;src/main.c:87: if (enemy_x == 0)
   00F0 78            [ 4]  246 	ld	a, b
   00F1 B7            [ 4]  247 	or	a, a
   00F2 20 04         [12]  248 	jr	NZ,00110$
                            249 ;src/main.c:89: enemy_x = ENEMY_INIT_X;
   00F4 06 43         [ 7]  250 	ld	b, #0x43
   00F6 18 04         [12]  251 	jr	00111$
   00F8                     252 00110$:
                            253 ;src/main.c:93: enemy_x = enemy_x += ENEMY_VX;
   00F8 78            [ 4]  254 	ld	a, b
   00F9 C6 FF         [ 7]  255 	add	a, #0xff
   00FB 47            [ 4]  256 	ld	b, a
   00FC                     257 00111$:
                            258 ;src/main.c:96: if (bullet_y == 0)
   00FC 79            [ 4]  259 	ld	a, c
   00FD B7            [ 4]  260 	or	a, a
   00FE 20 04         [12]  261 	jr	NZ,00113$
                            262 ;src/main.c:98: bullet_y = BULLET_INIT_Y;
   0100 0E B2         [ 7]  263 	ld	c, #0xb2
   0102 18 04         [12]  264 	jr	00114$
   0104                     265 00113$:
                            266 ;src/main.c:102: bullet_y = bullet_y += BULLET_VY;
   0104 79            [ 4]  267 	ld	a, c
   0105 C6 FE         [ 7]  268 	add	a, #0xfe
   0107 4F            [ 4]  269 	ld	c, a
   0108                     270 00114$:
                            271 ;src/main.c:105: cpct_waitVSYNC();
   0108 C5            [11]  272 	push	bc
   0109 CDr00r00      [17]  273 	call	_cpct_waitVSYNC
   010C C1            [10]  274 	pop	bc
   010D 18 AE         [12]  275 	jr	00116$
                            276 	.area _CODE
                            277 	.area _INITIALIZER
                            278 	.area _CABS (ABS)
